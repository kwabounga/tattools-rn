{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\kwa\\\\projects\\\\tattools-rn\\\\tattools-rn\\\\components\\\\ui\\\\BottomSheet.js\";\nimport React, { Component } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { PanGestureHandler, NativeViewGestureHandler, State, TapGestureHandler } from 'react-native-gesture-handler';\nimport { LoremIpsum } from \"../../commons/common\";\nimport { USE_NATIVE_DRIVER } from \"../../commons/config\";\nvar HEADER_HEIGHT = 50;\nvar windowHeight = Dimensions.get('window').height;\nvar SNAP_POINTS_FROM_TOP = [50, windowHeight * 0.4, windowHeight * 0.8];\nexport var BottomSheet = function (_Component) {\n  _inherits(BottomSheet, _Component);\n\n  function BottomSheet(props) {\n    var _this;\n\n    _classCallCheck(this, BottomSheet);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BottomSheet).call(this, props));\n    _this.masterdrawer = React.createRef();\n    _this.drawer = React.createRef();\n    _this.drawerheader = React.createRef();\n    _this.scroll = React.createRef();\n\n    _this._onHeaderHandlerStateChange = function (_ref) {\n      var nativeEvent = _ref.nativeEvent;\n\n      if (nativeEvent.oldState === State.BEGAN) {\n        _this._lastScrollY.setValue(0);\n      }\n\n      _this._onHandlerStateChange({\n        nativeEvent: nativeEvent\n      });\n    };\n\n    _this._onHandlerStateChange = function (_ref2) {\n      var nativeEvent = _ref2.nativeEvent;\n\n      if (nativeEvent.oldState === State.ACTIVE) {\n        var velocityY = nativeEvent.velocityY,\n            translationY = nativeEvent.translationY;\n        translationY -= _this._lastScrollYValue;\n        var dragToss = 0.05;\n        var endOffsetY = _this.state.lastSnap + translationY + dragToss * velocityY;\n        var destSnapPoint = SNAP_POINTS_FROM_TOP[0];\n\n        for (var i = 0; i < SNAP_POINTS_FROM_TOP.length; i++) {\n          var snapPoint = SNAP_POINTS_FROM_TOP[i];\n          var distFromSnap = Math.abs(snapPoint - endOffsetY);\n\n          if (distFromSnap < Math.abs(destSnapPoint - endOffsetY)) {\n            destSnapPoint = snapPoint;\n          }\n        }\n\n        _this.setState({\n          lastSnap: destSnapPoint\n        });\n\n        _this._translateYOffset.extractOffset();\n\n        _this._translateYOffset.setValue(translationY);\n\n        _this._translateYOffset.flattenOffset();\n\n        _this._dragY.setValue(0);\n\n        Animated.spring(_this._translateYOffset, {\n          velocity: velocityY,\n          tension: 68,\n          friction: 12,\n          toValue: destSnapPoint,\n          useNativeDriver: USE_NATIVE_DRIVER\n        }).start();\n      }\n    };\n\n    var START = SNAP_POINTS_FROM_TOP[0];\n    var END = SNAP_POINTS_FROM_TOP[SNAP_POINTS_FROM_TOP.length - 1];\n    _this.state = {\n      lastSnap: END\n    };\n    _this._lastScrollYValue = 0;\n    _this._lastScrollY = new Animated.Value(0);\n    _this._onRegisterLastScroll = Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          y: _this._lastScrollY\n        }\n      }\n    }], {\n      useNativeDriver: USE_NATIVE_DRIVER\n    });\n\n    _this._lastScrollY.addListener(function (_ref3) {\n      var value = _ref3.value;\n      _this._lastScrollYValue = value;\n    });\n\n    _this._dragY = new Animated.Value(0);\n    _this._onGestureEvent = Animated.event([{\n      nativeEvent: {\n        translationY: _this._dragY\n      }\n    }], {\n      useNativeDriver: USE_NATIVE_DRIVER\n    });\n    _this._reverseLastScrollY = Animated.multiply(new Animated.Value(-1), _this._lastScrollY);\n    _this._translateYOffset = new Animated.Value(END);\n    _this._translateY = Animated.add(_this._translateYOffset, Animated.add(_this._dragY, _this._reverseLastScrollY)).interpolate({\n      inputRange: [START, END],\n      outputRange: [START, END],\n      extrapolate: 'clamp'\n    });\n    return _this;\n  }\n\n  _createClass(BottomSheet, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(TapGestureHandler, {\n        maxDurationMs: 100000,\n        ref: this.masterdrawer,\n        maxDeltaY: this.state.lastSnap - SNAP_POINTS_FROM_TOP[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        }\n      }, React.createElement(View, {\n        style: StyleSheet.absoluteFillObject,\n        pointerEvents: \"box-none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        }\n      }, React.createElement(Animated.View, {\n        style: [StyleSheet.absoluteFillObject, {\n          transform: [{\n            translateY: this._translateY\n          }]\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        }\n      }, React.createElement(PanGestureHandler, {\n        ref: this.drawerheader,\n        simultaneousHandlers: [this.scroll, this.masterdrawer],\n        shouldCancelWhenOutside: false,\n        onGestureEvent: this._onGestureEvent,\n        onHandlerStateChange: this._onHeaderHandlerStateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        }\n      }, React.createElement(Animated.View, {\n        style: styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        }\n      })), React.createElement(PanGestureHandler, {\n        ref: this.drawer,\n        simultaneousHandlers: [this.scroll, this.masterdrawer],\n        shouldCancelWhenOutside: false,\n        onGestureEvent: this._onGestureEvent,\n        onHandlerStateChange: this._onHandlerStateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        }\n      }, React.createElement(Animated.View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        }\n      }, React.createElement(NativeViewGestureHandler, {\n        ref: this.scroll,\n        waitFor: this.masterdrawer,\n        simultaneousHandlers: this.drawer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        }\n      }, React.createElement(Animated.ScrollView, {\n        style: [styles.scrollView, {\n          marginBottom: SNAP_POINTS_FROM_TOP[0]\n        }],\n        bounces: false,\n        onScrollBeginDrag: this._onRegisterLastScroll,\n        scrollEventThrottle: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        }\n      }, React.createElement(LoremIpsum, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        }\n      }), React.createElement(LoremIpsum, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        }\n      }), React.createElement(LoremIpsum, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        }\n      }))))))));\n    }\n  }]);\n\n  return BottomSheet;\n}(Component);\n\nvar Example = function (_Component2) {\n  _inherits(Example, _Component2);\n\n  function Example() {\n    _classCallCheck(this, Example);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Example).apply(this, arguments));\n  }\n\n  _createClass(Example, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        }\n      }, React.createElement(BottomSheet, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        }\n      }));\n    }\n  }]);\n\n  return Example;\n}(Component);\n\nexport { Example as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  header: {\n    height: HEADER_HEIGHT,\n    backgroundColor: 'red'\n  }\n});","map":{"version":3,"sources":["C:/Users/kwa/projects/tattools-rn/tattools-rn/components/ui/BottomSheet.js"],"names":["React","Component","PanGestureHandler","NativeViewGestureHandler","State","TapGestureHandler","LoremIpsum","USE_NATIVE_DRIVER","HEADER_HEIGHT","windowHeight","Dimensions","get","height","SNAP_POINTS_FROM_TOP","BottomSheet","props","masterdrawer","createRef","drawer","drawerheader","scroll","_onHeaderHandlerStateChange","nativeEvent","oldState","BEGAN","_lastScrollY","setValue","_onHandlerStateChange","ACTIVE","velocityY","translationY","_lastScrollYValue","dragToss","endOffsetY","state","lastSnap","destSnapPoint","i","length","snapPoint","distFromSnap","Math","abs","setState","_translateYOffset","extractOffset","flattenOffset","_dragY","Animated","spring","velocity","tension","friction","toValue","useNativeDriver","start","START","END","Value","_onRegisterLastScroll","event","contentOffset","y","addListener","value","_onGestureEvent","_reverseLastScrollY","multiply","_translateY","add","interpolate","inputRange","outputRange","extrapolate","StyleSheet","absoluteFillObject","transform","translateY","styles","header","container","scrollView","marginBottom","Example","create","flex","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Animated, StyleSheet, Text, View, Dimensions } from 'react-native';\r\nimport {\r\n  PanGestureHandler,\r\n  NativeViewGestureHandler,\r\n  State,\r\n  TapGestureHandler,\r\n} from 'react-native-gesture-handler';\r\n\r\nimport { LoremIpsum } from '../../commons/common';\r\nimport { USE_NATIVE_DRIVER } from '../../commons/config';\r\n\r\nconst HEADER_HEIGHT = 50;\r\nconst windowHeight = Dimensions.get('window').height;\r\nconst SNAP_POINTS_FROM_TOP = [50, windowHeight * 0.4, windowHeight * 0.8];\r\n\r\nexport class BottomSheet extends Component {\r\n  masterdrawer = React.createRef();\r\n  drawer = React.createRef();\r\n  drawerheader = React.createRef();\r\n  scroll = React.createRef();\r\n  constructor(props) {\r\n    super(props);\r\n    const START = SNAP_POINTS_FROM_TOP[0];\r\n    const END = SNAP_POINTS_FROM_TOP[SNAP_POINTS_FROM_TOP.length - 1];\r\n\r\n    this.state = {\r\n      lastSnap: END,\r\n    };\r\n\r\n    this._lastScrollYValue = 0;\r\n    this._lastScrollY = new Animated.Value(0);\r\n    this._onRegisterLastScroll = Animated.event(\r\n      [{ nativeEvent: { contentOffset: { y: this._lastScrollY } } }],\r\n      { useNativeDriver: USE_NATIVE_DRIVER }\r\n    );\r\n    this._lastScrollY.addListener(({ value }) => {\r\n      this._lastScrollYValue = value;\r\n    });\r\n\r\n    this._dragY = new Animated.Value(0);\r\n    this._onGestureEvent = Animated.event(\r\n      [{ nativeEvent: { translationY: this._dragY } }],\r\n      { useNativeDriver: USE_NATIVE_DRIVER }\r\n    );\r\n\r\n    this._reverseLastScrollY = Animated.multiply(\r\n      new Animated.Value(-1),\r\n      this._lastScrollY\r\n    );\r\n\r\n    this._translateYOffset = new Animated.Value(END);\r\n    this._translateY = Animated.add(\r\n      this._translateYOffset,\r\n      Animated.add(this._dragY, this._reverseLastScrollY)\r\n    ).interpolate({\r\n      inputRange: [START, END],\r\n      outputRange: [START, END],\r\n      extrapolate: 'clamp',\r\n    });\r\n  }\r\n  _onHeaderHandlerStateChange = ({ nativeEvent }) => {\r\n    if (nativeEvent.oldState === State.BEGAN) {\r\n      this._lastScrollY.setValue(0);\r\n    }\r\n    this._onHandlerStateChange({ nativeEvent });\r\n  };\r\n  _onHandlerStateChange = ({ nativeEvent }) => {\r\n    if (nativeEvent.oldState === State.ACTIVE) {\r\n      let { velocityY, translationY } = nativeEvent;\r\n      translationY -= this._lastScrollYValue;\r\n      const dragToss = 0.05;\r\n      const endOffsetY =\r\n        this.state.lastSnap + translationY + dragToss * velocityY;\r\n\r\n      let destSnapPoint = SNAP_POINTS_FROM_TOP[0];\r\n      for (let i = 0; i < SNAP_POINTS_FROM_TOP.length; i++) {\r\n        const snapPoint = SNAP_POINTS_FROM_TOP[i];\r\n        const distFromSnap = Math.abs(snapPoint - endOffsetY);\r\n        if (distFromSnap < Math.abs(destSnapPoint - endOffsetY)) {\r\n          destSnapPoint = snapPoint;\r\n        }\r\n      }\r\n      this.setState({ lastSnap: destSnapPoint });\r\n      this._translateYOffset.extractOffset();\r\n      this._translateYOffset.setValue(translationY);\r\n      this._translateYOffset.flattenOffset();\r\n      this._dragY.setValue(0);\r\n      Animated.spring(this._translateYOffset, {\r\n        velocity: velocityY,\r\n        tension: 68,\r\n        friction: 12,\r\n        toValue: destSnapPoint,\r\n        useNativeDriver: USE_NATIVE_DRIVER,\r\n      }).start();\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <TapGestureHandler\r\n        maxDurationMs={100000}\r\n        ref={this.masterdrawer}\r\n        maxDeltaY={this.state.lastSnap - SNAP_POINTS_FROM_TOP[0]}>\r\n        <View style={StyleSheet.absoluteFillObject} pointerEvents=\"box-none\">\r\n          <Animated.View\r\n            style={[\r\n              StyleSheet.absoluteFillObject,\r\n              {\r\n                transform: [{ translateY: this._translateY }],\r\n              },\r\n            ]}>\r\n            <PanGestureHandler\r\n              ref={this.drawerheader}\r\n              simultaneousHandlers={[this.scroll, this.masterdrawer]}\r\n              shouldCancelWhenOutside={false}\r\n              onGestureEvent={this._onGestureEvent}\r\n              onHandlerStateChange={this._onHeaderHandlerStateChange}>\r\n              <Animated.View style={styles.header} />\r\n            </PanGestureHandler>\r\n            <PanGestureHandler\r\n              ref={this.drawer}\r\n              simultaneousHandlers={[this.scroll, this.masterdrawer]}\r\n              shouldCancelWhenOutside={false}\r\n              onGestureEvent={this._onGestureEvent}\r\n              onHandlerStateChange={this._onHandlerStateChange}>\r\n              <Animated.View style={styles.container}>\r\n                <NativeViewGestureHandler\r\n                  ref={this.scroll}\r\n                  waitFor={this.masterdrawer}\r\n                  simultaneousHandlers={this.drawer}>\r\n                  <Animated.ScrollView\r\n                    style={[\r\n                      styles.scrollView,\r\n                      { marginBottom: SNAP_POINTS_FROM_TOP[0] },\r\n                    ]}\r\n                    bounces={false}\r\n                    onScrollBeginDrag={this._onRegisterLastScroll}\r\n                    scrollEventThrottle={1}>\r\n                    <LoremIpsum />\r\n                    <LoremIpsum />\r\n                    <LoremIpsum />\r\n                  </Animated.ScrollView>\r\n                </NativeViewGestureHandler>\r\n              </Animated.View>\r\n            </PanGestureHandler>\r\n          </Animated.View>\r\n        </View>\r\n      </TapGestureHandler>\r\n    );\r\n  }\r\n}\r\n\r\nexport default class Example extends Component {\r\n  render() {\r\n    return (\r\n      <View style={styles.container}>\r\n        <BottomSheet />\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  header: {\r\n    height: HEADER_HEIGHT,\r\n    backgroundColor: 'red',\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}