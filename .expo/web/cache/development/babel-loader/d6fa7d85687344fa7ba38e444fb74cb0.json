{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\kwa\\\\projects\\\\tattools-rn\\\\tattools-rn\\\\components\\\\ui\\\\TopSheet.js\";\nimport React, { Component } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { PanGestureHandler, NativeViewGestureHandler, State, TapGestureHandler } from 'react-native-gesture-handler';\nimport { USE_NATIVE_DRIVER } from \"../../exports/config\";\nvar FOOTER_HEIGHT;\nvar SNAP_POINTS_FROM_TOP;\nvar windowHeight = Dimensions.get('window').height;\nexport var TopSheet = function (_Component) {\n  _inherits(TopSheet, _Component);\n\n  function TopSheet(props) {\n    var _this;\n\n    _classCallCheck(this, TopSheet);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TopSheet).call(this, props));\n    _this.masterdrawer = React.createRef();\n    _this.drawer = React.createRef();\n    _this.drawerheader = React.createRef();\n    _this.scroll = React.createRef();\n\n    _this._onHeaderHandlerStateChange = function (_ref) {\n      var nativeEvent = _ref.nativeEvent;\n\n      if (nativeEvent.oldState === State.BEGAN) {\n        _this._lastScrollY.setValue(0);\n      }\n\n      _this._onHandlerStateChange({\n        nativeEvent: nativeEvent\n      });\n    };\n\n    _this._onHandlerStateChange = function (_ref2) {\n      var nativeEvent = _ref2.nativeEvent;\n\n      if (nativeEvent.oldState === State.ACTIVE) {\n        var velocityY = nativeEvent.velocityY,\n            translationY = nativeEvent.translationY;\n        translationY -= _this._lastScrollYValue;\n        var dragToss = 0.05;\n        var endOffsetY = _this.state.lastSnap + translationY + dragToss * velocityY;\n        var destSnapPoint = SNAP_POINTS_FROM_TOP[0];\n\n        for (var i = 0; i < SNAP_POINTS_FROM_TOP.length; i++) {\n          var snapPoint = SNAP_POINTS_FROM_TOP[i];\n          var distFromSnap = Math.abs(snapPoint - endOffsetY);\n\n          if (distFromSnap < Math.abs(destSnapPoint - endOffsetY)) {\n            destSnapPoint = snapPoint;\n          }\n        }\n\n        _this.setState({\n          lastSnap: destSnapPoint\n        });\n\n        _this._translateYOffset.extractOffset();\n\n        _this._translateYOffset.setValue(translationY);\n\n        _this._translateYOffset.flattenOffset();\n\n        _this._dragY.setValue(0);\n\n        Animated.spring(_this._translateYOffset, {\n          velocity: velocityY,\n          tension: 68,\n          friction: 12,\n          toValue: destSnapPoint,\n          useNativeDriver: USE_NATIVE_DRIVER\n        }).start();\n      }\n    };\n\n    FOOTER_HEIGHT = _this.props.height;\n    SNAP_POINTS_FROM_TOP = [-windowHeight, -windowHeight * 0.4, -(windowHeight - (FOOTER_HEIGHT + (StatusBar.currentHeight || 20)))];\n    var START = SNAP_POINTS_FROM_TOP[0];\n    var END = SNAP_POINTS_FROM_TOP[SNAP_POINTS_FROM_TOP.length - 1];\n    _this.state = {\n      lastSnap: END\n    };\n    _this._lastScrollYValue = 0;\n    _this._lastScrollY = new Animated.Value(0);\n    _this._onRegisterLastScroll = Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          y: _this._lastScrollY\n        }\n      }\n    }], {\n      useNativeDriver: USE_NATIVE_DRIVER\n    });\n\n    _this._lastScrollY.addListener(function (_ref3) {\n      var value = _ref3.value;\n      _this._lastScrollYValue = value;\n    });\n\n    _this._dragY = new Animated.Value(0);\n    _this._onGestureEvent = Animated.event([{\n      nativeEvent: {\n        translationY: _this._dragY\n      }\n    }], {\n      useNativeDriver: USE_NATIVE_DRIVER\n    });\n    _this._reverseLastScrollY = Animated.multiply(new Animated.Value(-1), _this._lastScrollY);\n    _this._translateYOffset = new Animated.Value(END);\n    _this._translateY = Animated.add(_this._translateYOffset, Animated.add(_this._dragY, _this._reverseLastScrollY)).interpolate({\n      inputRange: [START, END],\n      outputRange: [START, END],\n      extrapolate: 'clamp'\n    });\n    return _this;\n  }\n\n  _createClass(TopSheet, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(TapGestureHandler, {\n        maxDurationMs: 100000,\n        ref: this.masterdrawer,\n        maxDeltaY: this.state.lastSnap - SNAP_POINTS_FROM_TOP[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        }\n      }, React.createElement(View, {\n        style: StyleSheet.absoluteFillObject,\n        pointerEvents: \"box-none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        }\n      }, React.createElement(Animated.View, {\n        style: [StyleSheet.absoluteFillObject, {\n          transform: [{\n            translateY: this._translateY\n          }],\n          backgroundColor: \"#323232\"\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        }\n      }, React.createElement(PanGestureHandler, {\n        ref: this.drawer,\n        simultaneousHandlers: [this.scroll, this.masterdrawer],\n        shouldCancelWhenOutside: false,\n        onGestureEvent: this._onGestureEvent,\n        onHandlerStateChange: this._onHandlerStateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        }\n      }, React.createElement(Animated.View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        }\n      }, React.createElement(NativeViewGestureHandler, {\n        ref: this.scroll,\n        waitFor: this.masterdrawer,\n        simultaneousHandlers: this.drawer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        }\n      }, React.createElement(Animated.ScrollView, {\n        style: [styles.scrollView, {\n          marginBottom: SNAP_POINTS_FROM_TOP[0]\n        }],\n        bounces: false,\n        onScrollBeginDrag: this._onRegisterLastScroll,\n        scrollEventThrottle: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        }\n      }, this.props.children)))), React.createElement(PanGestureHandler, {\n        ref: this.drawerheader,\n        simultaneousHandlers: [this.scroll, this.masterdrawer],\n        shouldCancelWhenOutside: false,\n        onGestureEvent: this._onGestureEvent,\n        onHandlerStateChange: this._onHeaderHandlerStateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        }\n      }, React.createElement(Animated.View, {\n        style: {\n          height: this.props.height,\n          backgroundColor: this.props.backgroundColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        }\n      })))));\n    }\n  }]);\n\n  return TopSheet;\n}(Component);\nTopSheet.defaultProps = {\n  height: 30,\n  backgroundColor: \"red\"\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  }\n});","map":{"version":3,"sources":["C:/Users/kwa/projects/tattools-rn/tattools-rn/components/ui/TopSheet.js"],"names":["React","Component","PanGestureHandler","NativeViewGestureHandler","State","TapGestureHandler","USE_NATIVE_DRIVER","FOOTER_HEIGHT","SNAP_POINTS_FROM_TOP","windowHeight","Dimensions","get","height","TopSheet","props","masterdrawer","createRef","drawer","drawerheader","scroll","_onHeaderHandlerStateChange","nativeEvent","oldState","BEGAN","_lastScrollY","setValue","_onHandlerStateChange","ACTIVE","velocityY","translationY","_lastScrollYValue","dragToss","endOffsetY","state","lastSnap","destSnapPoint","i","length","snapPoint","distFromSnap","Math","abs","setState","_translateYOffset","extractOffset","flattenOffset","_dragY","Animated","spring","velocity","tension","friction","toValue","useNativeDriver","start","StatusBar","currentHeight","START","END","Value","_onRegisterLastScroll","event","contentOffset","y","addListener","value","_onGestureEvent","_reverseLastScrollY","multiply","_translateY","add","interpolate","inputRange","outputRange","extrapolate","StyleSheet","absoluteFillObject","transform","translateY","backgroundColor","styles","container","scrollView","marginBottom","children","defaultProps","create","flex"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Animated, StyleSheet, Text, View, Dimensions,StatusBar } from 'react-native';\r\nimport {\r\n  PanGestureHandler,\r\n  NativeViewGestureHandler,\r\n  State,\r\n  TapGestureHandler,\r\n} from 'react-native-gesture-handler';\r\n\r\n\r\nimport { USE_NATIVE_DRIVER } from '../../exports/config';\r\nlet FOOTER_HEIGHT;\r\nlet  SNAP_POINTS_FROM_TOP;\r\nconst windowHeight = Dimensions.get('window').height;\r\nexport class TopSheet extends Component {\r\n  masterdrawer = React.createRef();\r\n  drawer = React.createRef();\r\n  drawerheader = React.createRef();\r\n  scroll = React.createRef();\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    FOOTER_HEIGHT = this.props.height;\r\n    SNAP_POINTS_FROM_TOP = [(-windowHeight), (-windowHeight * 0.4), -(windowHeight - (FOOTER_HEIGHT + (StatusBar.currentHeight||20)))];\r\n    const START = SNAP_POINTS_FROM_TOP[0];\r\n    const END = SNAP_POINTS_FROM_TOP[SNAP_POINTS_FROM_TOP.length - 1];\r\n\r\n    this.state = {\r\n      lastSnap: END,\r\n    };\r\n\r\n    this._lastScrollYValue = 0;\r\n    this._lastScrollY = new Animated.Value(0);\r\n    this._onRegisterLastScroll = Animated.event(\r\n      [{ nativeEvent: { contentOffset: { y: this._lastScrollY } } }],\r\n      { useNativeDriver: USE_NATIVE_DRIVER }\r\n    );\r\n    this._lastScrollY.addListener(({ value }) => {\r\n      this._lastScrollYValue = value;\r\n    });\r\n\r\n    this._dragY = new Animated.Value(0);\r\n    this._onGestureEvent = Animated.event(\r\n      [{ nativeEvent: { translationY: this._dragY } }],\r\n      { useNativeDriver: USE_NATIVE_DRIVER }\r\n    );\r\n\r\n    this._reverseLastScrollY = Animated.multiply(\r\n      new Animated.Value(-1),\r\n      this._lastScrollY\r\n    );\r\n\r\n    this._translateYOffset = new Animated.Value(END);\r\n    this._translateY = Animated.add(\r\n      this._translateYOffset,\r\n      Animated.add(this._dragY, this._reverseLastScrollY)\r\n    ).interpolate({\r\n      inputRange: [START, END],\r\n      outputRange: [START, END],\r\n      extrapolate: 'clamp',\r\n    });\r\n  }\r\n  _onHeaderHandlerStateChange = ({ nativeEvent }) => {\r\n    if (nativeEvent.oldState === State.BEGAN) {\r\n      this._lastScrollY.setValue(0);\r\n    }\r\n    this._onHandlerStateChange({ nativeEvent });\r\n  };\r\n  _onHandlerStateChange = ({ nativeEvent }) => {\r\n    if (nativeEvent.oldState === State.ACTIVE) {\r\n      let { velocityY, translationY } = nativeEvent;\r\n      translationY -= this._lastScrollYValue;\r\n      const dragToss = 0.05;\r\n      const endOffsetY =\r\n        this.state.lastSnap + translationY + dragToss * velocityY;\r\n\r\n      let destSnapPoint = SNAP_POINTS_FROM_TOP[0];\r\n      for (let i = 0; i < SNAP_POINTS_FROM_TOP.length; i++) {\r\n        const snapPoint = SNAP_POINTS_FROM_TOP[i];\r\n        const distFromSnap = Math.abs(snapPoint - endOffsetY);\r\n        if (distFromSnap < Math.abs(destSnapPoint - endOffsetY)) {\r\n          destSnapPoint = snapPoint;\r\n        }\r\n      }\r\n      this.setState({ lastSnap: destSnapPoint });\r\n      this._translateYOffset.extractOffset();\r\n      this._translateYOffset.setValue(translationY);\r\n      this._translateYOffset.flattenOffset();\r\n      this._dragY.setValue(0);\r\n      Animated.spring(this._translateYOffset, {\r\n        velocity: velocityY,\r\n        tension: 68,\r\n        friction: 12,\r\n        toValue: destSnapPoint,\r\n        useNativeDriver: USE_NATIVE_DRIVER,\r\n      }).start();\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <TapGestureHandler\r\n        maxDurationMs={100000}\r\n        ref={this.masterdrawer}\r\n        maxDeltaY={this.state.lastSnap - SNAP_POINTS_FROM_TOP[0]}>\r\n        <View style={StyleSheet.absoluteFillObject} pointerEvents=\"box-none\">\r\n          <Animated.View\r\n            style={[\r\n              StyleSheet.absoluteFillObject,\r\n              {\r\n                transform: [{ translateY: this._translateY }],\r\n                backgroundColor: \"#323232\",\r\n              },\r\n            ]}>            \r\n            <PanGestureHandler\r\n              ref={this.drawer}\r\n              simultaneousHandlers={[this.scroll, this.masterdrawer]}\r\n              shouldCancelWhenOutside={false}\r\n              onGestureEvent={this._onGestureEvent}\r\n              onHandlerStateChange={this._onHandlerStateChange}>\r\n              <Animated.View style={styles.container}>\r\n                <NativeViewGestureHandler\r\n                  ref={this.scroll}\r\n                  waitFor={this.masterdrawer}\r\n                  simultaneousHandlers={this.drawer}>\r\n                  <Animated.ScrollView\r\n                    style={[\r\n                      styles.scrollView,\r\n                      { marginBottom: SNAP_POINTS_FROM_TOP[0] },\r\n                    ]}\r\n                    bounces={false}\r\n                    onScrollBeginDrag={this._onRegisterLastScroll}\r\n                    scrollEventThrottle={1}>\r\n                    {this.props.children}\r\n                  </Animated.ScrollView>\r\n                </NativeViewGestureHandler>\r\n              </Animated.View>\r\n            </PanGestureHandler>\r\n            <PanGestureHandler\r\n              ref={this.drawerheader}\r\n              simultaneousHandlers={[this.scroll, this.masterdrawer]}\r\n              shouldCancelWhenOutside={false}\r\n              onGestureEvent={this._onGestureEvent}\r\n              onHandlerStateChange={this._onHeaderHandlerStateChange}>\r\n              <Animated.View style={{ height:this.props.height, backgroundColor: this.props.backgroundColor, }} />\r\n            </PanGestureHandler>\r\n          </Animated.View>\r\n        </View>\r\n      </TapGestureHandler>\r\n    );\r\n  }\r\n}\r\nTopSheet.defaultProps = {\r\n  height: 30,\r\n  backgroundColor: \"red\"\r\n};\r\n// export default class Example extends Component {\r\n//   render() {\r\n//     return (\r\n//       <View style={styles.container}>\r\n//         <TopSheet />\r\n//       </View>\r\n//     );\r\n//   }\r\n// }\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}